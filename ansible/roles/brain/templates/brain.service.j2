[Unit]
Description=Brain
After=network.target
[Service]
ExecStart=/home/brain/brain -mongoUser=brain \
                              -mongoPassword={{ mongo_user.password }} \
                              -mailRedirectBaseUrl=https://www.spotnav.co.za \
                              -rootPasswordFileLocation=rootPassword \
                              -pathToEmailTemplateFolder=resources/email/template \
                              -mongoNodes="{% for host in groups['db'] -%}
                                            {{ hostvars[host]['ansible_eth1']['ipv4']['address'] }}:27017{{ "," if not loop.last }}
                                           {%- endfor %}" \
                              -kafkaBrokers="{% for host in groups['messaging'] -%}
                                            {{ hostvars[host]['ansible_eth1']['ipv4']['address'] }}:27017{{ "," if not loop.last }}
                                           {%- endfor %}" \
WorkingDirectory=/home/brain
Restart=always
User=brain
Group=brain
Environment=PATH=/usr/bin:/usr/local/bin